@SHOW_JUEL

@SHOW_ABLUP_SELECT
FOR LOCAL:10,1,CHARANUM
;;;20120209　反抗刻印を消す処理を追加
;反抗刻印Lvと同じLvの屈服刻印が必要
;反抗刻印Lvと同じLvの従順が必要
	IF (MARK:(LOCAL:10):3 > 0) && (MARK:(LOCAL:10):3 <= MARK:(LOCAL:10):2) && (MARK:(LOCAL:10):3 <= ABL:(LOCAL:10):10)
		IF MARK:(LOCAL:10):3 == 1
;屈服の宝珠で減らす
			IF JUEL:(LOCAL:10):12  >= 2000
				MARK:(LOCAL:10):3 -= 1
				JUEL:(LOCAL:10):12 -= 2000
				PRINTFORM %CALLNAME:(LOCAL:10)%の
				PRINTS MARKNAME:3
				PRINT のレベルが
				PRINTV MARK:(LOCAL:10):3
				PRINTL 上升了
			ENDIF
		ELSEIF MARK:(LOCAL:10):3 == 2
			IF JUEL:(LOCAL:10):12  >= 5000
				MARK:(LOCAL:10):3 -= 1
				JUEL:(LOCAL:10):12 -= 5000
				PRINTFORM %CALLNAME:(LOCAL:10)%の
				PRINTS MARKNAME:3
				PRINT のレベルが
				PRINTV MARK:(LOCAL:10):3
				PRINTL 上升了
			ENDIF
		ELSEIF MARK:(LOCAL:10):3 == 3
			IF JUEL:(LOCAL:10):12  >= 10000
				MARK:(LOCAL:10):3 -= 1
				JUEL:(LOCAL:10):12 -= 10000
				PRINTFORM %CALLNAME:(LOCAL:10)%の
				PRINTS MARKNAME:3
				PRINT のレベルが
				PRINTV MARK:(LOCAL:10):3
				PRINTL 上升了
			ENDIF
		ENDIF
	ENDIF
	FOR LOCAL:11,0,30
		SELECTCASE LOCAL:11
			;多くの要素が必要な能力から上げてゆく
			;自慰成瘾
			CASE 0
				LOCAL:12= 30
			;精液成瘾
			CASE 1
				LOCAL:12= 31
			;百合成瘾
			CASE 2
				LOCAL:12= 32
			;ゲイ中毒
			CASE 3
				LOCAL:12= 33
			;侍奉精神
			CASE 4
				LOCAL:12= 13
			;百合属性
			CASE 5
				LOCAL:12= 17
			;ホモっ気
			CASE 6
				LOCAL:12= 18
			;受虐属性
			CASE 7
				LOCAL:12= 15
			;施虐属性
			CASE 8
				LOCAL:12= 16
			;露出癖
			CASE 9
				LOCAL:12= 14
			;親密
			CASE 10
				LOCAL:12= 9
			;従順
			CASE 11
				LOCAL:12= 10
			;欲望
			CASE 12
				LOCAL:12= 11
			;技巧
			CASE 13
				LOCAL:12= 12
			;Ｃ感觉
			CASE 14
				LOCAL:12= 0
			;Ｖ感觉
			CASE 15
				LOCAL:12= 1
			;Ａ感觉
			CASE 16
				LOCAL:12= 2
			;Ｂ感觉
			CASE 17
				LOCAL:12= 3
			CASEELSE
				CONTINUE
		ENDSELECT
		FOR LOCAL,0,4
			LOCAL:3 = 0
			LOCAL:4 = 0
			SIF JUEL_DEMAND(LOCAL:12,LOCAL,0,LOCAL:10) == -2
				BREAK
			SIF JUEL_DEMAND(LOCAL:12,LOCAL,0,LOCAL:10) < 0
				CONTINUE
			;必要な宝珠を探す
			FOR LOCAL:1,0,100
				IF JUEL_DEMAND(LOCAL:12,LOCAL,LOCAL:1,LOCAL:10) > 0
					IF JUEL:(LOCAL:10):(LOCAL:1) < JUEL_DEMAND(LOCAL:12,LOCAL,LOCAL:1,LOCAL:10)
						LOCAL:3 ++
						BREAK
					ENDIF
				ENDIF
			NEXT
			SIF LOCAL:3
				CONTINUE
			;必要な経験を探す
			FOR LOCAL:1,0,100
				IF EXP_DEMAND(LOCAL:12,LOCAL,LOCAL:1,LOCAL:10) > 0
					IF  EXP:(LOCAL:10):(LOCAL:1) < EXP_DEMAND(LOCAL:12,LOCAL,LOCAL:1,LOCAL:10)
						LOCAL:4 ++
						BREAK
					ENDIF
				ENDIF
			NEXT
			SIF LOCAL:4
				CONTINUE
			FOR LOCAL:1,0,40
				JUEL:(LOCAL:10):(LOCAL:1) -= JUEL_DEMAND(LOCAL:12,LOCAL,LOCAL:1,LOCAL:10)
			NEXT
			ABL:(LOCAL:10):(LOCAL:12) += 1
			PRINTFORML %ABLNAME:(LOCAL:12)%LVUP (%CALLNAME:(LOCAL:10)%)
			BREAK
		NEXT
	NEXT
NEXT
PRINT [100] - 確認
@USERABLUP
IF RESULT == 100
	FOR LOCAL , 1, CHARANUM
		CALL JUJUN_UP_CHECK(LOCAL)
		CALL YOKUBO_UP_CHECK(LOCAL)
	NEXT
	BEGIN TURNEND
	RETURN 1
ENDIF
RETURN 0

;ABLの上限
@MAXABL(ARG)
;恋慕はMAXLV99
IF ABL:ARG >= 99
	PRINTW 既にMAXです
	RETURN 1
ELSEIF ABL:ARG >= 5 && !TALENT:恋慕
	PRINTW 既にMAXです
	RETURN 1
ENDIF
RETURN 0
