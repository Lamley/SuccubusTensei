;イベント発生条件（押し倒す）
@EVENT_CHECK_4
VARSET LOCAL
IF SELECTCOM == 998
	TFLAG:イベント発生 = 1
ENDIF
SIF K:104
	TFLAG:イベント発生 = 1


;イベント終了条件
@EVENT_END_CHECK_4
IF SELECTCOM == 997
	TFLAG:イベント終了 = 1
	RETURN 1
ENDIF

RETURN 0



;イベント終了処理
@EVENT_END_4
VARSET LOCAL

RETURN 1


@NPC_ACTION_4(ARG)
VARSET LOCAL
FOR LOCAL,0,200
	SIF TRAINNAME:LOCAL == ""
		CONTINUE
	TRYCCALLFORM COM_ABLE{LOCAL}(ARG)
	IF RESULT
		LOCAL:1 = RAND(100)
		IF LOCAL:2 < LOCAL:1
			LOCAL:2 = LOCAL:1
			LOCAL:3 = LOCAL
			LOCAL:4++
		ENDIF
	ENDIF
	CATCH
	ENDCATCH
NEXT
;#;PRINTVL LOCAL:1
;#;PRINTVL LOCAL:2
;#;PRINTVL LOCAL:3
;#;PRINTVL LOCAL:4
;#;PRINTFORML %TRAINNAME:LOCAL%
;;;何かと便利なのでSTR:0に値だけセット
STR:0 = % "COM" + TOSTR(LOCAL:3) %

IF LOCAL:4
	SELECTCOM:ARG = LOCAL:3
ELSE
	SELECTCOM:ARG = 991
ENDIF
RETURN 1

