@COM_ABLE921(ARG)
VARSET LOCAL
LOCAL = ARG
VARSET ARG
SIF TCVAR:LOCAL:イベント != 2 || BASE:(TCVAR:LOCAL:行為対象):反抗 == 0
	RETURN 0
RETURN 1

@COM921(ARG)
VARSET LOCAL
;攻撃する
PRINTL 
PRINTFORML %"=" * 107%
IF BASE:ARG:反抗 == 0
	CFLAG:ARG:待機時間 += 2
	TFLAG:COM用変数 = -1
	RETURN 1
ENDIF

LOCAL = (MAXBASE:ARG:体力 + 2 * BASE:ARG:体力) / (60 * (1 + TCVAR:(TCVAR:ARG:行為対象):防御))
SIF GETBIT(TALENT:ARG:性別,1)
	TIMES LOCAL,1.20
LOCAL:1 = ABL:ARG:戦闘能力 - ABL:(TCVAR:ARG:行為対象):戦闘能力
IF TCVAR:(TCVAR:ARG:行為対象):無反抗
	TFLAG:COM用変数 = 3
	LOCAL *= 2
ELSE
	LOCAL = ATTACK_SUCCESS(LOCAL,LOCAL:1) * (3 - CFLAG:ARG:押さえつけ * 2) / 3
ENDIF
DOWNBASE:(TCVAR:ARG:行為対象):体力 += LOCAL
BASE:(TCVAR:ARG:行為対象):反抗 = MAX(BASE:(TCVAR:ARG:行為対象):反抗 - LOCAL,0)
BASE:(TCVAR:ARG:行為対象):興奮度 = MAX(BASE:(TCVAR:ARG:行為対象):興奮度 - LOCAL,0)

CFLAG:ARG:待機時間 += 2
VARSET ARG

RETURN 1
