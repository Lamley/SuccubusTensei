@COM_ABLE937(ARG)
VARSET LOCAL
LOCAL = ARG
VARSET ARG
SIF TCVAR:LOCAL:イベント != 2 || BASE:(TCVAR:LOCAL:行為対象):反抗 == 0 || CFLAG:LOCAL:受能動 != 2
	RETURN 0
RETURN 1

@COM937(ARG)
VARSET LOCAL
;情に訴える
PRINTL 
PRINTFORML %"=" * 107%
IF BASE:ARG:反抗 == 0
	CFLAG:ARG:待機時間 += 2
	TFLAG:COM用変数 = -1
	RETURN 1
ENDIF

LOCAL = (MAXBASE:ARG:气力 + 2 * BASE:ARG:气力) / (60 * (1 + TCVAR:(TCVAR:ARG:行為対象):防御))
SIF GETBIT(TALENT:ARG:性別,0)
	TIMES LOCAL,1.20
LOCAL:1 = ABL:ARG:说话技巧技能 - ABL:(TCVAR:ARG:行為対象):说话技巧技能 - TALENT:(TCVAR:ARG:行為対象):態度 * 3 + GETBIT(TALENT:ARG:性別,0) * 2 - GETBIT(TALENT:(TCVAR:ARG:行為対象):性別,0) * 2
IF TCVAR:(TCVAR:ARG:行為対象):無反抗
	TFLAG:COM用変数 = 3
	LOCAL *= 2
ELSE
	LOCAL = ATTACK_SUCCESS(LOCAL,LOCAL:1)
ENDIF

DOWNBASE:(TCVAR:ARG:行為対象):气力 += LOCAL
BASE:(TCVAR:ARG:行為対象):反抗 = MAX(BASE:(TCVAR:ARG:行為対象):反抗 - LOCAL,0)
BASE:(TCVAR:ARG:行為対象):興奮度 = MAX(BASE:(TCVAR:ARG:行為対象):興奮度 - LOCAL,0)


CFLAG:ARG:待機時間 += 2
VARSET ARG

RETURN 1
