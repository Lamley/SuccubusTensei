@COM_ABLE1020(ARG)
SIF !TFLAG:同室
	RETURN 0
RETURN GLOBAL_COMABLE(1020)
@COM1020(ARG)
VARSET LOCAL
PRINTL 
PRINTFORML %"=" * 107%
;声をかける
PRINTL 誰に声をかけますか？
FOR LOCAL,1,CHARANUM
	SIF LOCAL == MASTER
		CONTINUE
	SIF !TCVAR:LOCAL:同室 || CFLAG:LOCAL:睡眠 || CFLAG:LOCAL:衰弱 || CFLAG:LOCAL:会话
		CONTINUE
	PRINTFORML [{LOCAL,2}] - %CALLNAME:LOCAL%
NEXT
PRINTL [99] - 戻る
$INPUT_LOOP
INPUT
IF RESULT == 99
	RETURN 0
ELSEIF EXISTCSV(RESULT,0) && TCVAR:RESULT:同室
	IF TA:RESULT:MASTER:6 > 500 || TA:MASTER:RESULT:6 > 500
		PRINTFORML %CALLNAME:MASTER%と%CALLNAME:RESULT%は敵対しています
		TA:1:RESULT:0 -= 10
		TA:1:RESULT:1 -= 10
		TA:1:RESULT:2 -= 10
		TA:1:RESULT:3 -= 10
		TA:1:RESULT:4 -= 10
		TA:1:RESULT:6 -= 10
		TA:RESULT:1:0 -= 10
		TA:RESULT:1:1 -= 10
		TA:RESULT:1:2 -= 10
		TA:RESULT:1:3 -= 10
		TA:RESULT:1:4 -= 10
		TA:RESULT:1:6 -= 10
		ARG = RESULT
		SIF EQUIP:MASTER:《如何高明的道歉》 && (TA:1:ARG:6 < TA:ARG:1:6)
			CALL DOGEZA(ARG)
		SIF EQUIP:MASTER:《宽广心胸》 && (TA:1:ARG:6 > TA:ARG:1:6)
			CALL YURUSU(ARG)
		CFLAG:MASTER:待機時間 += 10
		RETURN 1
	ENDIF
	CALL EVENT_JOIN(MASTER,RESULT,3)
ELSE
	CLEARLINE 1
	GOTO INPUT_LOOP
ENDIF
RETURN 1
