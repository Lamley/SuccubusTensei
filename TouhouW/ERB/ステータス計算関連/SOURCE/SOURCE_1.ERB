;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;非TARGET依存性SOURCE
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_EXP(ARG)
VARSET LOCAL
SIF SOURCE:ARG:快Ｃ
	EXP:ARG:0 ++
SIF SOURCE:ARG:快Ｖ && (!TALENT:ARG:処女 || TALENT:処女 == -1|| !TFLAG:2)
	EXP:ARG:1 ++
SIF SOURCE:ARG:快Ａ
	EXP:ARG:2 ++
SIF SOURCE:ARG:快Ｂ
	EXP:ARG:3 ++
SIF SOURCE:ARG:快Ｍ
	EXP:ARG:4 ++
SIF CFLAG:ARG:跳蛋挿入 && EXP_UP(1,ARG) > 0
	EXP:ARG:1 --
SIF CFLAG:ARG:跳蛋A挿入 && EXP_UP(2,ARG) > 0
	EXP:ARG:2 --
;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;情愛のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_情愛(ARG)
VARSET LOCAL
SIF TCVAR:ARG:無理矢理
	SOURCE:ARG:情愛 /= 5
LOCAL = SOURCE:ARG:情愛
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 1.20
;ABL:従順をみる
LOCAL = ABL補正(LOCAL,ABL:ARG:従順,1)
CUP:ARG:恭順 += LOCAL

LOCAL = SOURCE:ARG:情愛
SIF FLAG:甲斐性無 && !CFLAG:ARG:うふふ
	LOCAL = LOCAL * 3 / 2
;欲望を見る
LOCAL = ABL補正(LOCAL,ABL:ARG:欲望,2)

CUP:ARG:欲情 += LOCAL

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;性行動のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_性行動(ARG)
VARSET LOCAL
LOCAL = SOURCE:ARG:性行動
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 1.50
;ABL:技巧をみる
LOCAL = ABL補正(LOCAL,ABL:ARG:技巧,1)

;ABL:奉仕精神をみる
SELECTCASE ABL:ARG:奉仕精神
	CASE 0
		TIMES LOCAL , 0.60
	CASE 1
		TIMES LOCAL , 0.80
	CASE 2
		TIMES LOCAL , 1.00
	CASE 3
		TIMES LOCAL , 1.20
	CASE 4
		TIMES LOCAL , 1.40
	CASE 5
		TIMES LOCAL , 1.70
	CASE 6
		TIMES LOCAL , 2.00
	CASE 7
		TIMES LOCAL , 2.40
	CASE 8
		TIMES LOCAL , 2.80
	CASE 9
		TIMES LOCAL , 4.00
	CASEELSE
		TIMES LOCAL , 5.00
ENDSELECT
CUP:ARG:習得 += LOCAL

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;達成のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_達成(ARG)
VARSET LOCAL
LOCAL = SOURCE:ARG:達成
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 1.50
;ABL:従順をみる
LOCAL = ABL補正(LOCAL,ABL:ARG:従順,1)

;ABL:奉仕精神をみる
LOCAL = ABL補正(LOCAL,ABL:ARG:奉仕精神,1)

CUP:ARG:恭順 += LOCAL

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;苦痛のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_苦痛(ARG)
VARSET LOCAL
LOCAL = SOURCE:ARG:苦痛
LOCAL:1 = SOURCE:ARG:苦痛
LOCAL:2 = SOURCE:ARG:苦痛 / 20

;受虐属性
SELECTCASE ABL:ARG:受虐属性
	CASE 0
		TIMES LOCAL:1 , 0.00
	CASE 1
		TIMES LOCAL:1 , 0.10
	CASE 2
		TIMES LOCAL:1 , 0.20
	CASE 3
		TIMES LOCAL:1 , 0.30
	CASE 4
		TIMES LOCAL:1 , 0.45
	CASE 5
		TIMES LOCAL:1 , 0.60
	CASE 6
		TIMES LOCAL:1 , 0.75
	CASE 7
		TIMES LOCAL:1 , 0.90
	CASE 8
		TIMES LOCAL:1 , 1.20
	CASE 9
		TIMES LOCAL:1 , 1.50
	CASEELSE
		TIMES LOCAL:1 , 3.00
ENDSELECT

;小人体型
IF TALENT:ARG:体型 < -2
	TIMES LOCAL , 2.00
	TIMES LOCAL:1 , 0.75
ENDIF

;調教者が【施虐狂】
SIF TALENT:PLAYER:施虐狂
	TIMES LOCAL:1 , 2.50

;胆怯
SIF TALENT:ARG:胆量 < 0
	TIMES LOCAL:2 , 2.00

;受虐属性があるとPALAM:欲情も上がる
;そのとき調教者が【施虐狂】だと効果的
;苦痛に応じて恐怖のソースが増加する
CUP:ARG:苦痛 += LOCAL
CUP:ARG:欲情 += LOCAL:1
CUP:ARG:恐怖 += LOCAL:2

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;恐怖のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_恐怖(ARG)
VARSET LOCAL

LOCAL= SOURCE:ARG:恐怖
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 0.50
;ABL:従順をみる（恐怖よりは畏怖に近いと解釈）
LOCAL = ABL補正(LOCAL,ABL:ARG:従順,1)

CUP:ARG:恐怖 += LOCAL

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;液体のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_液体(ARG)
VARSET LOCAL
LOCAL = SOURCE:ARG:液体
;小人体型
IF TALENT:ARG:体型 < -2
	SIF SELECTCOM != 50 && SELECTCOM != 180
		TIMES LOCAL , 0.40
ENDIF

CUP:ARG:潤滑 += LOCAL

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;欲情のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_欲情(ARG)
VARSET LOCAL
LOCAL = SOURCE:ARG:欲情
SIF WITH_MOB()
	TIMES LOCAL, 0.70
;欲望を見る
LOCAL = ABL補正(LOCAL,ABL:ARG:欲望,2)

CUP:ARG:欲情 += LOCAL

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;恭順のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_恭順(ARG)
VARSET LOCAL
SIF FLAG:甲斐性無
	SOURCE:ARG:恭順 /= 2
LOCAL = SOURCE:ARG:恭順
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 0.50
;ABL:従順をみる
SELECTCASE ABL:ARG:従順
	CASE 0
		TIMES LOCAL , 0.50
	CASE 1
		TIMES LOCAL , 0.80
	CASE 2
		TIMES LOCAL , 1.00
	CASE 3
		TIMES LOCAL , 1.20
	CASE 4
		TIMES LOCAL , 1.40
	CASE 5
		TIMES LOCAL , 1.60
	CASE 6
		TIMES LOCAL , 1.80
	CASE 7
		TIMES LOCAL , 2.00
	CASE 8
		TIMES LOCAL , 2.40
	CASE 9
		TIMES LOCAL , 3.00
	CASEELSE
		TIMES LOCAL , 5.00
ENDSELECT
CUP:ARG:恭順 += LOCAL

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;露出のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_露出(ARG)
VARSET LOCAL
;害羞と不知羞恥はここで処理
SIF TALENT:ARG:羞恥心 > 0
	TIMES SOURCE:ARG:露出 , 2.00
SIF TALENT:ARG:羞恥心 < 0
	TIMES SOURCE:ARG:露出 , 0.50
SIF WITH_MOB()
	TIMES SOURCE:ARG:露出 , 1.50
;潤滑アップの50％を露出のソースに加える
;ただし液体追加のソースのぶんは引く
SOURCE:ARG:露出 += (CUP:ARG:潤滑 - SOURCE:ARG:液体) / 2

LOCAL = SOURCE:ARG:露出
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 0.75
;ABL:露出癖をみる
SELECTCASE ABL:ARG:露出癖
	CASE 0
		TIMES LOCAL , 0.00
	CASE 1
		TIMES LOCAL , 0.10
	CASE 2
		TIMES LOCAL , 0.20
	CASE 3
		TIMES LOCAL , 0.40
	CASE 4
		TIMES LOCAL , 0.60
	CASE 5
		TIMES LOCAL , 0.80
	CASE 6
		TIMES LOCAL , 1.00
	CASE 7
		TIMES LOCAL , 1.20
	CASE 8
		TIMES LOCAL , 1.40
	CASE 9
		TIMES LOCAL , 1.60
	CASEELSE
		TIMES LOCAL , 2.00
ENDSELECT
CUP:ARG:欲情 += LOCAL

LOCAL = SOURCE:ARG:露出

;PALAM:恥情をみる
;恥ずかしさを感じれば感じるほどあまり恥ずかしくなくなる
IF PALAM:ARG:恥情 < PALAMLV:1
	TIMES LOCAL , 1.00
ELSEIF PALAM:ARG:恥情 < PALAMLV:2
	TIMES LOCAL , 0.90
ELSEIF PALAM:ARG:恥情 < PALAMLV:3
	TIMES LOCAL , 0.80
ELSEIF PALAM:ARG:恥情 < PALAMLV:4
	TIMES LOCAL , 0.70
ELSEIF PALAM:ARG:恥情 >= PALAMLV:4
	TIMES LOCAL , 0.60
ENDIF

SIF LOCAL < 0
	LOCAL = 0
CUP:ARG:恥情 += LOCAL

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;屈従のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_屈従(ARG)
VARSET LOCAL
SIF FLAG:甲斐性無
	SOURCE:ARG:屈従 /= 2
LOCAL = SOURCE:ARG:屈従
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 0.50
;ABL:従順をみる
LOCAL = ABL補正(LOCAL,ABL:ARG:従順,1)

;ABL:奉仕精神をみる
SELECTCASE ABL:ARG:奉仕精神
	CASE 0
		TIMES LOCAL , 1.00
	CASE 1
		TIMES LOCAL , 1.50
	CASE 2
		TIMES LOCAL , 2.00
	CASE 3
		TIMES LOCAL , 2.50
	CASE 4
		TIMES LOCAL , 3.00
	CASE 5
		TIMES LOCAL , 3.50
	CASE 6
		TIMES LOCAL , 4.00
	CASE 7
		TIMES LOCAL , 4.50
	CASE 8
		TIMES LOCAL , 5.00
	CASE 9
		TIMES LOCAL , 5.50
	CASEELSE
		TIMES LOCAL , 7.00
ENDSELECT
CUP:ARG:屈服 += LOCAL

;---------------------------------------------------
;PLAYERにも影響を与えるSOURCE
;---------------------------------------------------
;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;歓楽のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_歓楽(ARG)
VARSET LOCAL

LOCAL = SOURCE:ARG:歓楽
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 1.50
;恋慕
LOCAL = LOCAL * (10 + 5 * TALENT:ARG:恋慕) / 10
;思慕
LOCAL = LOCAL * (10 + 3 * TALENT:ARG:思慕) / 10
;心情
LOCAL = LOCAL * (10 + 2 * TALENT:ARG:心情) / 10

SIF WITH_MOB() && BASE:ARG:情緒 < (MAXBASE:ARG:情緒 / 2)
	TIMES LOCAL , 1.20
SIF CFLAG:ARG:デート中
	TIMES LOCAL , 1.30
	
;ABL:親密をみる
IF LOCAL < 100000
	LOCAL = LOCAL * (ABL:ARG:親密 * 5 + 100) / 100
ELSEIF LOCAL < 100000000
	LOCAL = LOCAL / 100 * (ABL:ARG:親密 * 5 + 100)
ENDIF

;ABL:欲望をみる
IF LOCAL < 100000
	LOCAL = LOCAL * (ABL:ARG:欲望 * 5 + 100) / 100
ELSEIF LOCAL < 100000000
	LOCAL = LOCAL / 100 * (ABL:ARG:欲望 * 5 + 100)
ENDIF

;好感度を見る
IF CFLAG:ARG:2 <= 10
	TIMES LOCAL , 0.50
ELSEIF CFLAG:ARG:2 <= 50
	TIMES LOCAL , 0.80
ELSEIF CFLAG:ARG:2 <= 100
	TIMES LOCAL , 1.00
ELSEIF CFLAG:ARG:2 <= 300
	TIMES LOCAL , 1.10
ELSEIF CFLAG:ARG:2 <= 500
	TIMES LOCAL , 1.20
ELSEIF CFLAG:ARG:2 <= 700
	TIMES LOCAL , 1.30
ELSEIF CFLAG:ARG:2 <= 1000
	TIMES LOCAL , 1.40
ELSEIF CFLAG:ARG:2 <= 3000
	TIMES LOCAL , 1.50
ELSEIF CFLAG:ARG:2 <= 5000
	TIMES LOCAL , 1.70
ELSEIF CFLAG:ARG:2 <= 500000
	IF LOCAL < 100000
		LOCAL = LOCAL * (CFLAG:ARG:2 / 50 + 100) / 100
	ELSEIF LOCAL < 10000000
		LOCAL = LOCAL / 100 * (CFLAG:ARG:2 / 50 + 100)
	ELSEIF LOCAL < 100000000
		IF CFLAG:ARG:2 <= 50000
			LOCAL = LOCAL / 100 * (CFLAG:ARG:2 / 50 + 100)
		ELSE
			LOCAL = 1000000000
		ENDIF
	ENDIF
ENDIF

CUP:ARG:好意 += LOCAL
CUP:PLAYER:欲情 += MIN(LOCAL / 10 , 100)

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;征服のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_征服(ARG)
SIF TCVAR:ARG:好きにして
	SOURCE:ARG:征服 += 10 * (ABL:ARG:施虐属性 + 1)
SIF FLAG:甲斐性無
	SOURCE:ARG:征服 *= 2

VARSET LOCAL
;地位で分岐
IF CFLAG:ARG:310 > CFLAG:PLAYER:310
	;高位のキャラ
	LOCAL:1 = SOURCE:ARG:征服 / 4
	;ABL:欲望をみる
	SELECTCASE ABL:ARG:欲望
		CASE 0
			TIMES LOCAL:1 , 0.10
		CASE 1,2
			TIMES LOCAL:1 , 0.15
		CASE 3,4
			TIMES LOCAL:1 , 0.20
		CASE 5,6,7
			TIMES LOCAL:1 , 0.25
		CASE 8,9
			TIMES LOCAL:1 , 0.30
		CASEELSE
			IF LOCAL:1 < 100000
				LOCAL:1 = LOCAL:1 * (ABL:ARG:欲望 * 5 + 15) / 100
			ELSEIF LOCAL:1 < 100000000
				LOCAL:1 = LOCAL:1 / 100 * (ABL:ARG:欲望 * 5 + 15)
			ENDIF
	ENDSELECT
	;ABL:施虐属性をみる
	IF LOCAL:1 < 100000
		LOCAL:1 = LOCAL:1 * (ABL:ARG:施虐属性 * 30 + 100) / 100
	ELSEIF LOCAL:1 < 100000000
		LOCAL:1 = LOCAL:1 / 100 * (ABL:ARG:施虐属性 * 30 + 100)
	ENDIF
ELSE
	;低位のキャラ
	LOCAL:2 = SOURCE:ARG:征服 / 2
	;ABL:親密をみる
	SELECTCASE ABL:ARG:親密
		CASE 0
			TIMES LOCAL:2 , 0.10
		CASE 1
			TIMES LOCAL:2 , 0.15
		CASE 2
			TIMES LOCAL:2 , 0.20
		CASE 3
			TIMES LOCAL:2 , 0.25
		CASE 4
			TIMES LOCAL:2 , 0.30
		CASEELSE
			IF LOCAL:2 < 100000
				LOCAL:2 = LOCAL:2 * (ABL:ARG:親密 * 5 + 15) / 100
			ELSEIF B < 100000000
				LOCAL:2 = LOCAL:2 / 100 * (ABL:ARG:親密 * 5 + 15)
			ENDIF
	ENDSELECT
ENDIF

LOCAL = SOURCE:ARG:征服
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 2.00
;ABL:施虐属性をみる
SELECTCASE ABL:ARG:施虐属性
	CASE 0
		TIMES LOCAL , 0.70
	CASE 1
		TIMES LOCAL , 1.00
	CASE 2
		TIMES LOCAL , 1.30
	CASE 3
		TIMES LOCAL , 1.70
	CASE 4
		TIMES LOCAL , 2.00
	CASEELSE
		IF LOCAL < 100000
			LOCAL = LOCAL * (ABL:ARG:施虐属性 * 15 + 175) / 100
		ELSEIF LOCAL < 100000000
			LOCAL = LOCAL / 100 * (ABL:ARG:施虐属性 * 15 + 175)
		ENDIF
ENDSELECT
SIF FLAG:甲斐性無
	LOCAL *= 2
CUP:ARG:優越 += LOCAL
CUP:ARG:欲情 += LOCAL:1
CUP:PLAYER:屈服 += LOCAL:1
CUP:ARG:恥情 += LOCAL:2

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;受動のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_受動(ARG)
VARSET LOCAL
SIF FLAG:甲斐性無
	SOURCE:ARG:受動 /= 2
IF CFLAG:ARG:310 > CFLAG:PLAYER:310
	;高位のキャラ
	LOCAL:1 = SOURCE:ARG:受動 / 3
	;ABL:欲望をみる
	SELECTCASE ABL:ARG:欲望
		CASE 0
			TIMES LOCAL:1 , 0.30
		CASE 1
			TIMES LOCAL:1 , 0.35
		CASE 2
			TIMES LOCAL:1 , 0.40
		CASE 3
			TIMES LOCAL:1 , 0.45
		CASE 4
			TIMES LOCAL:1 , 0.50
		CASEELSE
			IF LOCAL:1 < 100000
				LOCAL:1 = LOCAL:1 * (ABL:ARG:欲望 * 10 + 10) / 100
			ELSEIF LOCAL:1 < 100000000
				LOCAL:1 = LOCAL:1 / 100 * (ABL:ARG:欲望 * 10 + 10)
			ENDIF
	ENDSELECT
ELSE
	LOCAL:2 = SOURCE:ARG:受動 / 2
	;ABL:奉仕精神をみる
	SELECTCASE ABL:ARG:奉仕精神
		CASE 0
			TIMES LOCAL:2 , 0.30
		CASE 1
			TIMES LOCAL:2 , 0.35
		CASE 2
			TIMES LOCAL:2 , 0.40
		CASE 3
			TIMES LOCAL:2 , 0.45
		CASE 4
			TIMES LOCAL:2 , 0.50
		CASEELSE
			IF LOCAL:2 < 100000
				LOCAL:2 = LOCAL:2 * (ABL:ARG:奉仕精神 * 10 + 10) / 100
			ELSEIF LOCAL:2 < 100000000
				LOCAL:2 = LOCAL:2 / 100 * (ABL:ARG:奉仕精神 * 10 + 10)
			ENDIF
	ENDSELECT
ENDIF

LOCAL = SOURCE:ARG:受動
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 0.50
;ABL:親密をみる
IF LOCAL < 100000
	LOCAL = LOCAL * (ABL:ARG:親密 * 10 + 70) / 100
ELSEIF LOCAL < 100000000
	LOCAL = LOCAL / 100 * (ABL:ARG:親密 * 10 + 70)
ENDIF

CUP:ARG:好意 += LOCAL
CUP:ARG:屈服 += LOCAL:1
CUP:PLAYER:恭順 += LOCAL:1
CUP:ARG:恭順 += LOCAL:2

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;誘惑のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_誘惑(ARG)
SIF FLAG:甲斐性無
	SOURCE:ARG:誘惑 *= 2
SOURCE:ARG:誘惑 = SOURCE:ARG:誘惑 * GET_REVISION(ABL:ARG:欲望 + 2, 500, 10) / 100
LOCAL = SOURCE:ARG:誘惑
LOCAL:1 = SOURCE:ARG:誘惑
;相手主導
IF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 2.00
	TIMES LOCAL:1, 2.00
ENDIF
CUP:ARG:優越 += LOCAL
LOCAL = LOCAL * (100 + GET_REVISION(ABL:PLAYER:欲望, 500, 20)) / 100
CUP:PLAYER:欲情 += LOCAL
LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:PLAYER:従順, 500, 5)) / 100
CUP:PLAYER:恭順 += LOCAL:1

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;侮辱のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_侮辱(ARG)
SIF FLAG:甲斐性無
	SOURCE:ARG:侮辱 *= 2
SOURCE:ARG:侮辱 = SOURCE:ARG:侮辱 * GET_REVISION(ABL:ARG:施虐属性 + 2, 500, 10) / 100
LOCAL = SOURCE:ARG:侮辱
;相手主導
SIF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 2.00
LOCAL = LOCAL * (100 + GET_REVISION(ABL:PLAYER:受虐属性, 500, 20)) / 100
LOCAL = LOCAL * (100 + GET_REVISION(ABL:PLAYER:露出癖, 500, 20)) / 100

;PALAM:恥情をみる
;恥ずかしさを感じれば感じるほどあまり恥ずかしくなくなる
IF PALAM:PLAYER:恥情 < PALAMLV:1
	TIMES LOCAL , 1.00
ELSEIF PALAM:PLAYER:恥情 < PALAMLV:2
	TIMES LOCAL , 0.90
ELSEIF PALAM:PLAYER:恥情 < PALAMLV:3
	TIMES LOCAL , 0.80
ELSEIF PALAM:PLAYER:恥情 < PALAMLV:4
	TIMES LOCAL , 0.70
ELSEIF PALAM:PLAYER:恥情 >= PALAMLV:4
	TIMES LOCAL , 0.60
ENDIF
CUP:PLAYER:恥情 += LOCAL
CUP:ARG:優越 += LOCAL / 2
;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;挑発のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_挑発(ARG)
SIF FLAG:甲斐性無
	SOURCE:ARG:挑発 *= 2
SOURCE:ARG:挑発 = SOURCE:ARG:挑発 * GET_REVISION(ABL:ARG:施虐属性 + 2, 500, 10) / 100
LOCAL = SOURCE:ARG:挑発
LOCAL:1 = SOURCE:ARG:挑発
;相手主導
IF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 2.00
	TIMES LOCAL:1, 2.00
ENDIF

CUP:ARG:優越 += LOCAL
LOCAL = LOCAL * (100 + GET_REVISION(ABL:PLAYER:欲望, 500, 10)) / 100
CUP:PLAYER:欲情 += LOCAL
LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:PLAYER:受虐属性, 500, 5)) / 100
CUP:PLAYER:屈服 += LOCAL:1

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;奉仕のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_奉仕(ARG)
SOURCE:ARG:奉仕 = SOURCE:ARG:奉仕 * GET_REVISION(ABL:ARG:技巧 + ABL:ARG:奉仕精神 + 2, 500, 10) / 100
LOCAL = SOURCE:ARG:奉仕
LOCAL:1 = SOURCE:ARG:奉仕
;相手主導
IF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 0.75
	TIMES LOCAL:1, 0.75
ENDIF
LOCAL = LOCAL * (100 + GET_REVISION(ABL:PLAYER:欲望, 500, 10)) / 100
CUP:PLAYER:欲情 += LOCAL
LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:PLAYER:受虐属性, 500, 5)) / 100
CUP:PLAYER:屈服 += LOCAL:1

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;強要のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_強要(ARG)
SIF FLAG:甲斐性無
	SOURCE:ARG:強要 *= 2
SOURCE:ARG:強要 = SOURCE:ARG:強要 * GET_REVISION(ABL:ARG:施虐属性 +ABL:ARG:欲望 + 2, 500, 10) / 100
LOCAL = SOURCE:ARG:強要
LOCAL:1 = SOURCE:ARG:強要
;相手主導
IF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 2.00
	TIMES LOCAL:1, 2.00
ENDIF
CUP:ARG:優越 += LOCAL
LOCAL = LOCAL * (100 + GET_REVISION(ABL:PLAYER:奉仕精神, 500, 5)) / 100
CUP:PLAYER:恭順 += LOCAL
LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:PLAYER:従順, 500, 10)) / 100
CUP:PLAYER:屈服 += LOCAL:1
CUP:PLAYER:恐怖 += LOCAL:1 / 2
;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;加虐のソース処理
;CALL		USER
;ARG		キャラNO
;RETURN		VOID
;COMMENT	
;-----------------------------------------------------------
@SOURCE_加虐(ARG)
SIF TCVAR:ARG:好きにして
	SOURCE:ARG:加虐 += 10 * (ABL:ARG:施虐属性 + 1)
SIF FLAG:甲斐性無
	SOURCE:ARG:加虐 *= 2
SOURCE:ARG:加虐 = SOURCE:ARG:加虐 * GET_REVISION(ABL:ARG:施虐属性 + ABL:ARG:欲望 + 2, 1000, 5) / 100
LOCAL = SOURCE:ARG:加虐
LOCAL:1 = SOURCE:ARG:加虐
;相手主導
IF ARG != MASTER && CFLAG:ARG:うふふ == 2
	TIMES LOCAL, 2.00
	TIMES LOCAL:1, 2.00
ENDIF
SIF ABL:ARG:施虐属性 < ABL:MASTER:施虐属性
	TIMES LOCAL, 0.75
CUP:ARG:優越 += LOCAL * 2
LOCAL = LOCAL * (100 + GET_REVISION(ABL:PLAYER:受虐属性, 500, 10)) / 100
CUP:PLAYER:苦痛 += LOCAL
LOCAL = LOCAL * (100 + GET_REVISION(ABL:PLAYER:受虐属性, 500, 5)) / 100
CUP:PLAYER:恐怖 += LOCAL
LOCAL:1 = LOCAL:1 * (100 + GET_REVISION(ABL:PLAYER:従順, 500, 10)) / 100
CUP:PLAYER:屈服 += LOCAL:1

;FileName_SOURCE1.ERB ------------------------------ Rev1.00
;ARG= 補正がかかるソース
;ARG:1= 参照するABL値
;ARG:2= 補正の種類
;-----------------------------------------------------------
@ABL補正(ARG,ARG:1,ARG:2)
#FUNCTION
IF ARG:2 == 1
	SELECTCASE ARG:1
		CASE 0
			TIMES ARG , 0.10
		CASE 1
			TIMES ARG , 0.30
		CASE 2
			TIMES ARG , 0.50
		CASE 3
			TIMES ARG , 1.00
		CASE 4
			TIMES ARG , 1.50
		CASE 5
			TIMES ARG , 2.00
		CASE 6
			TIMES ARG , 2.50
		CASE 7
			TIMES ARG , 3.00
		CASE 8
			TIMES ARG , 3.50
		CASE 9
			TIMES ARG , 4.00
		CASE 10
			TIMES ARG , 5.00
		CASEELSE
			TIMES ARG , 6.00
	ENDSELECT
ELSEIF ARG:2 == 2
	SELECTCASE ARG:1
		CASE 0
			TIMES ARG , 0.20
		CASE 1
			TIMES ARG , 0.40
		CASE 2
			TIMES ARG , 0.80
		CASE 3
			TIMES ARG , 1.20
		CASE 4
			TIMES ARG , 1.60
		CASE 5
			TIMES ARG , 2.00
		CASE 6
			TIMES ARG , 2.40
		CASE 7
			TIMES ARG , 2.80
		CASE 8
			TIMES ARG , 3.20
		CASE 9
			TIMES ARG , 3.60
		CASEELSE
			TIMES ARG , 5.00
	ENDSELECT
ENDIF
RETURNF ARG
;-------------------------------------------------
;関数名:SOURCE_REVISION1
;快楽系SOURCEの快楽系ABLによる補正
;1/10される
;-------------------------------------------------
@SOURCE_REVISION1(ARG)
#FUNCTION
SELECTCASE ARG
	CASE 0 TO 5
		RETURNF 10 + 7 * ARG
	CASE 6 TO 9
		RETURNF 30 + 4 * ARG
	CASE 10 TO 15
		RETURNF 45 + 2 * ARG
	CASE 16 TO 19
		RETURNF 70 + ARG
	CASE IS >= 20
		RETURNF 90
ENDSELECT

;-------------------------------------------------
;関数名:SOURCE_REVISION2
;快楽系SOURCEに依存するUP:欲望のABL:欲望による補正
;1/100される
;-------------------------------------------------
@SOURCE_REVISION2(ARG)
#FUNCTION
SELECTCASE ARG
	CASE 0 TO 5
		RETURNF 25 + 7 * ARG
	CASE 6 TO 9
		RETURNF 45 + 3 * ARG
	CASE 10 TO 15
		RETURNF 60 + 2 * ARG
	CASE 16 TO 19
		RETURNF 80 + ARG
	CASE IS >= 20
		RETURNF 100
ENDSELECT