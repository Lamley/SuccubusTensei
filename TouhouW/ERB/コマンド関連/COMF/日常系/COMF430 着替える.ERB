;-------------------------------------------------
;更衣
;-------------------------------------------------
@COM430
#DIM 対象
#DIM 種類
PRINTW 要换掉随身的内袴吗？
DRAWLINE
CALL DISPLAY_COLLECTION(1,1)
DRAWLINE
PRINTFORML [0] 不换
$INPUT_LOOP
INPUT
IF RESULT == 0
	RETURN 0
ELSE
	対象 = RESULT / 100
	種類 = RESULT % 100
	CALL SPEND_HAVE_COLLECTION(RESULT)
	IF RESULT != 0
		CFLAG:MASTER:206 = 種類
		CFLAG:MASTER:246 = 種類
		CFLAG:MASTER:きょうのぱんつ = 種類
		CFLAG:MASTER:パジャマパンツ = 種類
		PRINTFORM %CALLNAME:MASTER%
		IF EQUIP:MASTER:下半身内袴２ == 0
			PRINTFORML 给%CALLNAME:(対象)%穿上了%PANTSNAME(種類)%
		ELSE
			PRINTFORM 从%PANTSNAME(EQUIP:MASTER:下半身内袴２)%
			PRINTFORML 换成了%CALLNAME:(対象)%的%PANTSNAME(種類)%
		ENDIF
		EQUIP:MASTER:下半身内袴２ = 種類
	ELSE
		GOTO INPUT_LOOP
	ENDIF
ENDIF
IF !FLAG:時間停止
	TIME += 3
ELSE
	BASE:MASTER:TSP -= 5
ENDIF
RETURN 1

;更衣
@COM_ABLE430
;移動実行判定
SIF !TFLAG:100
	RETURN 0
;一括管理
SIF GLOBAL_COMABLE(430)
	RETURN RESULT
;私室設定
SIF (CFLAG:MASTER:現在位置 != CFLAG:MASTER:311) && (CFLAG:現在位置 != CFLAG:311)
	RETURN 0
;SIF CSTR:MASTER:12 == ""
SIF !FLAG:パンツ輸送
	RETURN 0
SIF !FLAG:時間停止 && (!GETBIT(CFLAG:TARGET:既成事実, 1) && TARGET)
	RETURN 0
SIF CFLAG:うふふ
	RETURN 0
RETURN 1