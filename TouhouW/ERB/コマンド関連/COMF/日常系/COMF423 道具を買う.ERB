;-------------------------------------------------
;購買道具
;-------------------------------------------------
@COM423
TFLAG:194 = 1
;PRINTFORML {ITEMSALES:62}
CALL ITEM_SALES
DRAWLINE
CALL LIST_ITEM("河童道具")
DRAWLINE
PRINTL 「今天的话有优惠哦」
PRINTFORML 請选択要购买的道具 所持金:\\%TOSTR(MONEY,"#,###")%
;CALL TOOL_BUY
CALL SHOW_ITEM, "河童道具", 3
PRINTL
DRAWLINE
PRINT [100] - 返回　　　　　[101] - 道具的改造　[102] - 道具的開発
INPUT
LOCAL = RESULT
SELECTCASE LOCAL
CASE 100
	RETURN -1
CASE 101
	CALL TOOL_CUSTOM
	SIF RESULT
		RETURN RESULT
CASE 102
	PRINTL 「要開発的话必须得有git」
	PRINTW git到底是啥…
	RETURN -1
CASEELSE
	SELECTCASE ITEMSTOCK(LOCAL)
	CASE 1, 4
		RETURN -1
	CASE 2
		PRINTW 卖完了
		RETURN -1
	CASE 3
		PRINTW 所持金不足
		RETURN -1
	CASE 5
		PRINTW 已経有足够的了
		RETURN -1
	CASEELSE
		SIF !INRANGE(LOCAL, 0, 100)
			RETURN -1
	ENDSELECT
	PRINTFORML 要购买%ITEMNAME:LOCAL%吗？
	PRINTL [0] - 是  [1] - 否
	INPUT
	SIF RESULT
		RETURN -1
	ITEM:LOCAL ++
	SELECTCASE ITEMSALES:LOCAL
	CASE IS > 1
		ITEMSALES:LOCAL --
	CASE 1
		ITEMSALES:LOCAL = -1
	ENDSELECT
	MONEY -= ITEMPRICE:LOCAL / 3
ENDSELECT
RESTART


;購買道具
@COM_ABLE423
;ひとまず停止
RETURN 0
;停止中は不可
SIF FLAG:70 == 1
	RETURN 0
;移動実行判定
SIF !TFLAG:100
	RETURN 0
;一括管理
SIF GLOBAL_COMABLE(423)
	RETURN RESULT
;荷取の居る所
SIF TARGET != 51
	RETURN 0
SIF CFLAG:うふふ == 2
	RETURN 0
RETURN 1