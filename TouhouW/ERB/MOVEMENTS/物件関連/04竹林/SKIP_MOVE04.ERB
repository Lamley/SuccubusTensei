@SKIP_MOVE_4(ARG:0,ARG:1)
;LOCAL一覧
;0	現在の位置

;現在位置取得
LOCAL:0 = CFLAG:MASTER:現在位置
SIF ARG:1
	LOCAL = ARG:1
;暫定目的地に直接移動できる場合
IF CAN_MOVE(LOCAL, ARG) & 1
	;そこに移動
	RETURN ARG
ENDIF
[IF_DEBUG]
	PRINTFORML スキップムーブ開始	
[ENDIF]
;袋小路から行ける場所は固定なので、そこを目指す

SELECTCASE LOCAL:0
CASE 406
	RETURN 402
CASE 418
	RETURN 407
CASE 420
	RETURN 419
CASE 423
	RETURN 416
CASE 424
	RETURN 409
CASE 427,428
	RETURN 426
CASE 430
	RETURN 429
CASE 432
	RETURN 433
CASE 437
	RETURN 436
CASE 439
	RETURN 438
CASE 441
	RETURN 434
CASE 451,452
	RETURN 450
CASE 453,454,455,456
	RETURN 465
CASE 457,459
	RETURN 458
CASE 464
	RETURN 463
CASE MAXROOM
	RETURN 447
ENDSELECT
[IF_DEBUG]
	PRINTFORML 行き止まり処理を通過	
[ENDIF]
;夢幻館二階からは大庁へ
SIF GROUPMATCH(LOCAL:0,463,464) && !GROUPMATCH(ARG,463,464)
	RETURN 465
;夢幻館内から外に行く場合、太陽花田
SIF INRANGE(LOCAL:0,450,466) && !INRANGE(ARG,450,466) && LOCAL:0 != 438 && ARG != 438
	RETURN 438

;夢幻館外から館内に行く場合、太陽花田
SIF !INRANGE(LOCAL:0,450,466) && INRANGE(ARG,450,466) && LOCAL:0 != 438
	RETURN 438
[IF_DEBUG]
	PRINTFORML 特殊移動処理を通過	
[ENDIF]

;直接移動できない場合、1つ近い位置を暫定目的地に設定し直してループ
;地点追加時要フォロー（全ケース修正すること）
SELECTCASE ARG
	CASE 401
		SELECTCASE LOCAL:0
		CASE 403 TO 430
			RETURN 402
		CASE 432,442,443,444
			RETURN 433
		CASEELSE
			RETURN 435
		ENDSELECT
	CASE 402
		SELECTCASE LOCAL:0
		CASE 404,405,422
			RETURN 403
		CASE 408 TO 421,423 TO 430
			RETURN 407
		CASEELSE
			RETURN 401
		ENDSELECT
	CASE 403
		SELECTCASE LOCAL:0
		CASE 405,422
			RETURN 404
		CASEELSE
			RETURN 402
		ENDSELECT
	CASE 404
		SELECTCASE LOCAL:0
		CASE 408,414,415,416,417,422,423,424
			RETURN 405
		CASEELSE
			RETURN 403
		ENDSELECT
	CASE 405
		SELECTCASE LOCAL:0
		CASE 408,409,414,415,416,421,423,424
			RETURN 417
		CASEELSE
			RETURN 404
		ENDSELECT
	CASE 406
		RETURN 402
	CASE 407
		SELECTCASE LOCAL:0
		CASE 420
			RETURN 419
		CASE 410 TO 417,423
			RETURN 408
		CASE 421,424
			RETURN 409
		CASE 426,427,428
			RETURN 425
		CASE 430
			RETURN 429
		CASEELSE
			RETURN 402
		ENDSELECT
	CASE 408
		SELECTCASE LOCAL:0
		CASE 417,422,423,424
			RETURN 416
		CASE 409,421
			RETURN 412
		CASEELSE
			RETURN 407
		ENDSELECT
	CASE 409
		SELECTCASE LOCAL:0
		CASE 417,422,423
			RETURN 416
		CASE 408,410,411,415
			RETURN 412
		CASEELSE
			RETURN 407
		ENDSELECT
	CASE 410
		RETURN 408
	CASE 411
		RETURN 408
	CASE 412
		SELECTCASE LOCAL:0
		CASE 421,424
			RETURN 409
		CASEELSE
			RETURN 408
		ENDSELECT
	CASE 413
		SELECTCASE LOCAL:0
		CASE 421,424
			RETURN 409
		CASEELSE
			RETURN 408
		ENDSELECT
	CASE 414
		SELECTCASE LOCAL:0
		CASE 421,424
			RETURN 409
		CASEELSE
			RETURN 408
		ENDSELECT
	CASE 415
		SELECTCASE LOCAL:0
		CASE 409,421,423,424
			RETURN 416
		CASE 403,404,405,422
			RETURN 417
		CASEELSE
			RETURN 408
		ENDSELECT
	CASE 416
		SELECTCASE LOCAL:0
		CASE 421,424
			RETURN 409
		CASE 403,404,405,422
			RETURN 417
		CASEELSE
			RETURN 408
		ENDSELECT
	CASE 417
		SELECTCASE LOCAL:0
		CASE 407 TO 414,418,419,420,421,423 TO 430
			RETURN 416
		CASEELSE
			RETURN 405
		ENDSELECT
	CASE 418
		RETURN 407
	CASE 419
		RETURN 407
	CASE 420
		RETURN 419
	CASE 421
		RETURN 409
	CASE 422
		SELECTCASE LOCAL:0
		CASE 407 TO 416,418 TO 420,423 TO 430
			RETURN 417
		CASEELSE
			RETURN 405
		ENDSELECT
	CASE 423
		RETURN 416
	CASE 424
		RETURN 409
	CASE 425
		SELECTCASE LOCAL:0
		CASE 427,428
			RETURN 426
		CASEELSE
			RETURN 407
		ENDSELECT
	CASE 426
		RETURN 425
	CASE 427
		RETURN 426
	CASE 428
		RETURN 426
	CASE 429
		RETURN 407
	CASE 430
		RETURN 429
	CASE 431
		SELECTCASE LOCAL:0
		CASE 432,434,440 TO 447
			RETURN 433
		CASEELSE
			RETURN 401
		ENDSELECT
	CASE 432
		RETURN 433
	CASE 433
		SELECTCASE LOCAL:0
		CASE 434,440,441,445,446,447
			RETURN 434
		CASEELSE
			RETURN 401
		ENDSELECT
	CASE 434
		SELECTCASE LOCAL:0
		CASE 432,442,443,444
			RETURN 433
		CASEELSE
			RETURN 435
		ENDSELECT
	CASE 435
		SELECTCASE LOCAL:0
		CASE 437
			RETURN 436
		CASE 439
			RETURN 438
		CASE 402 TO 431
			RETURN 401
		CASEELSE
			RETURN 434
		ENDSELECT
	CASE 436
		RETURN 435
	CASE 437
		RETURN 436
	CASE 438
		;夢幻館玄関へ
		IF GROUPMATCH(LOCAL:0,451,452,453,454,455,456,460,463,464,465)
			RETURN 450
		;夢幻館庭へ
		ELSEIF GROUPMATCH(LOCAL:0,458,461,462)
			RETURN 466
		ELSE
			RETURN 435
		ENDIF
	CASE 439
		RETURN 438
	CASE 440
		SELECTCASE LOCAL:0
		CASE 443,444
			RETURN 447
		CASEELSE
			RETURN 434
		ENDSELECT
	CASE 441
		RETURN 434
	CASE 442
		SELECTCASE LOCAL:0
		CASE 446,447
			RETURN 444
		CASEELSE
			RETURN 433
		ENDSELECT
	CASE 443
		SELECTCASE LOCAL:0
		CASE 446,447
			RETURN 444
		CASEELSE
			RETURN 433
		ENDSELECT
	CASE 444
		SELECTCASE LOCAL:0
		CASE 440,445
			RETURN 447
		CASEELSE
			RETURN 433
		ENDSELECT
	CASE 445
		SELECTCASE LOCAL:0
		CASE 443
			RETURN 444
		CASEELSE
			RETURN 434
		ENDSELECT
	CASE 446
		SELECTCASE LOCAL:0
		CASE 443
			RETURN 444
		CASEELSE
			RETURN 434
		ENDSELECT
	CASE 447
		SELECTCASE LOCAL:0
		CASE 443
			RETURN 444
		CASEELSE
			RETURN 434
		ENDSELECT
	CASE 450
		SELECTCASE LOCAL:0
		;庭から
		CASE 458,462
			RETURN 466
		CASEELSE
			RETURN 465
		ENDSELECT
	CASE 451
		RETURN 450
	CASE 452
		RETURN 450
	CASE 453
		RETURN 465
	CASE 454
		RETURN 465
	CASE 455
		RETURN 465
	CASE 456
		RETURN 465
	CASE 457
		RETURN 458
	CASE 458
		SELECTCASE LOCAL:0
		;庭から
		CASE 450
			RETURN 466
		CASEELSE
			RETURN 461
		ENDSELECT
	CASE 459
		RETURN 458
	CASE 460
		SELECTCASE LOCAL:0
		;陽台から
		CASE 461,466
			RETURN 462
		CASEELSE
			RETURN 465
		ENDSELECT
	CASE 461
		SELECTCASE LOCAL:0
		;陽台から
		CASE 460,466
			RETURN 462
		CASEELSE
			RETURN 465
		ENDSELECT
	CASE 462
		SELECTCASE LOCAL:0
		;居間から
		CASE 458,465
			RETURN 461
		CASE 438
			RETURN 466
		CASEELSE
			RETURN 465
		ENDSELECT
	CASE 463
		RETURN 465
	CASE 464
		RETURN 463
	CASE 465
		SELECTCASE LOCAL:0
		CASE 458,462
			RETURN 461
		;玄関から
		CASEELSE
			RETURN 450
		ENDSELECT
	CASE 466
		SELECTCASE LOCAL:0
		CASE 458,462
			RETURN 461
		;玄関から
		CASEELSE
			RETURN 450
		ENDSELECT
	CASE MAXROOM
		RETURN 447
ENDSELECT