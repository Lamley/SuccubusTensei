@SKIP_MOVE_7(ARG,ARG:1)
;LOCAL一覧
;0	現在の位置

;現在位置取得
LOCAL = CFLAG:MASTER:現在位置
SIF ARG:1
	LOCAL = ARG:1
;暫定目的地に直接移動できる場合
IF CAN_MOVE(LOCAL, ARG) & 1
	;そこに移動
	RETURN ARG
ENDIF

;袋小路から行ける場所は固定なので、そこを目指す
SELECTCASE ARG
	;河童的宣傳站、リリーハウス、游泳場は玄武之澤のみ
	CASE 704,709,735
		RETURN 703
	;雛ハウス、猫之里、大蛤蟆之池は樹海中部のみ
	CASE 706,708,710
		RETURN 707
	CASE 712,732
		RETURN 711
	CASE 733
		RETURN 705
	;空小屋
	CASE 734
		RETURN 701
	CASE 720 TO 729
		SIF !GROUPMATCH(LOCAL:0,720,721,722,723,724,725,726,727,728,729,730)
			RETURN 730
ENDSELECT

;直接移動できない場合、1つ近い位置を暫定目的地に設定し直してループ
;地点追加時要フォロー（全ケース修正すること）
SELECTCASE ARG
	CASE 701
		RETURN 702
	CASE 702
		IF GROUPMATCH(LOCAL:0,717,718,719)
			RETURN 716
		ELSEIF LOCAL:0 == 734
			RETURN 701
		ELSE
			RETURN 703
		ENDIF
	;玄武之澤
	CASE 703
		IF GROUPMATCH(LOCAL:0,701,715,716,717,718,719,734,735)
			RETURN 702
		ELSE
			RETURN 705
		ENDIF
	CASE 704
		RETURN 703
	;中腹
	CASE 705
		IF GROUPMATCH(LOCAL:0,701,702,704,709,715,716,717,718,719,734,735)
			RETURN 703
		ELSE
			RETURN 707
		ENDIF
	;分岐
	CASE 707
		SELECTCASE LOCAL:0
			CASE 720 TO 730
				RETURN 731
			CASE 712,732
				RETURN 711
			CASEELSE
				RETURN 705
		ENDSELECT
	CASE 709
		RETURN 703
	CASE 706,708,710,711
		RETURN 707
	CASE 712
		RETURN 711
	;秋ハウス
	;秋ハウス
	CASE 715
		IF GROUPMATCH(LOCAL:0,717,718,)
			RETURN 719
		ELSE
			RETURN 702
		ENDIF
	CASE 716
		RETURN 702
	CASE 717 TO 719
		RETURN 716
	;華扇ハウス一階
	CASE 720 TO 722
		;屋敷の上の階なら客間
		IF GROUPMATCH(LOCAL:0,724,725,726,727,728)
			RETURN 723
		;じゃなきゃ玄関
		ELSE
			RETURN 729
		ENDIF
	CASE 723
		;屋敷の上の階なら居間
		IF GROUPMATCH(LOCAL:0,727,728)
			RETURN 726
		;じゃなきゃ玄関
		ELSE
			RETURN 729
		ENDIF
	CASE 724,725,726
		;客間
		RETURN 723
	CASE 727,728
		RETURN 726
	CASE 729
		;屋敷の上の階なら居間
		IF GROUPMATCH(LOCAL:0,724,725,726,727,728)
			RETURN 723
		;じゃなきゃ仙人の庭
		ELSE
			RETURN 730
		ENDIF
	;仙人の庭
	CASE 730
	;zurasita
		;屋敷なら玄関
		IF GROUPMATCH(LOCAL:0,720,721,722,723,724,725,726,727,728)
			RETURN 729
		;じゃなきゃ帚木
		ELSE
			RETURN 731
		ENDIF
	;帚木
	CASE 731
		;屋敷なら庭
		IF GROUPMATCH(LOCAL:0,720,721,722,723,724,725,726,727,728,729)
			RETURN 730
			;zurasita
		ELSE
			RETURN 707
		ENDIF
	CASE 732
		RETURN 711
	CASE 733
		RETURN 705
	CASE 734
		RETURN 702
	CASE 735
		RETURN 703
ENDSELECT