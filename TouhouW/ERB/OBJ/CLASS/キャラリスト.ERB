;キャラリスト
;要素名→ID変換用関数の存否確認用関数
;変換可能（IDと要素名の関係が常に変化しない）なら設置
;状況によって名前が変わるようなのは不可能
@EXIST_キャラリスト_ID
#LOCALSIZE 1
#LOCALSSIZE 1

;要素名→ID変換用関数
;必要なら各オブジェクトで同様に作成のこと
@キャラリスト_ID(ARG:0, ARGS:0, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS V_NAME                  ;作成する変数名
#DIMS C_NAME, OBJ_ID_LAST + 1 ;データ保持
#DIM  O_ID                    ;参照用
IF ARGS:0 == "RESET"
	VARSET C_NAME
	FOR O_ID, 1, OBJ_ID_LAST + 1
		C_NAME:O_ID = %GET_STR(, "キャラリスト", O_ID, "名前")%
	NEXT
ELSE
	O_ID = FINDELEMENT(C_NAME, ARGS:0, , , 1)
	CALLF MAKE_INT(V_NAME, O_ID)
ENDIF



@EXIST_キャラリスト1
#LOCALSIZE 1
#LOCALSSIZE 1

;オブジェクト本体
@キャラリスト1(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "存在するキャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
	SIF CHECK_CHARA(ARG, "存在")
		CALLF MAKE_INT(V_NAME, 1)
ENDSELECT



@EXIST_キャラリスト2
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト2(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "主人公以外のキャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
	IF ARG == MASTER || !CHECK_CHARA(ARG, "存在")
	ELSE
		CALLF MAKE_INT(V_NAME, 1)
	ENDIF
ENDSELECT


@EXIST_キャラリスト3
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト3(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "陥落ずみキャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
	IF !CHECK_CHARA(ARG, "存在")
	ELSEIF CHECK_CHARA(ARG, "陥落")
		CALLF MAKE_INT(V_NAME, 1)
	ENDIF
ENDSELECT



@EXIST_キャラリスト4
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト4(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "清い交際取得キャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
	SIF CHECK_CHARA(ARG, "清い交際")
		CALLF MAKE_INT(V_NAME, 1)
ENDSELECT





@EXIST_キャラリスト6
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト6(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "主人公の弱みを握るキャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
	SIF CHECK_CHARA(ARG, "弱み握り")
		CALLF MAKE_INT(V_NAME, 1)
ENDSELECT



@EXIST_キャラリスト7
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト7(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "主人公に弱みがあるキャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
	SIF CHECK_CHARA(ARG, "弱み握られ")
		CALLF MAKE_INT(V_NAME, 1)
ENDSELECT



@EXIST_キャラリスト8
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト8(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "反発刻印もちキャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
	SIF CHECK_CHARA(ARG, "反発刻印")
		CALLF MAKE_INT(V_NAME, 1)
ENDSELECT



@EXIST_キャラリスト9
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト9(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "時姦刻印もちキャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
	SIF CHECK_CHARA(ARG, "時姦刻印")
		CALLF MAKE_INT(V_NAME, 1)
ENDSELECT



@EXIST_キャラリスト10
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト10(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "同室にいるキャラリスト")
CASE "判定"
	SIF CHECK_CHARA(ARG, "同室")
		CALLF MAKE_INT(V_NAME, 1)
ENDSELECT




;複合条件系


@EXIST_キャラリスト31
#LOCALSIZE 1
#LOCALSSIZE 1

;オブジェクト本体
@キャラリスト31(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "換装可能キャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
;換装ることができる
	IF ARG == MASTER
		CALLF MAKE_INT(V_NAME, 1)
	ELSEIF !CHECK_CHARA(ARG, "存在") || !CHECK_CHARA(ARG, "同室")
	ELSEIF FLAG:時間停止 == 1
		CALLF MAKE_INT(V_NAME, 1)
	ELSEIF CHECK_CHARA(ARG, "陥落")
		CALLF MAKE_INT(V_NAME, 1)
	ELSEIF CHECK_CHARA(ARG, "弱み握り")
	ELSEIF CHECK_CHARA(ARG, "弱み握られ")
		CALLF MAKE_INT(V_NAME, 1)
	ELSE
	ENDIF
ENDSELECT



@EXIST_キャラリスト32
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト32(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "普段着模倣可能キャラリスト")
CASE "SHOP表示"
	CALLF MAKE_INT(V_NAME, 1)
CASE "判定"
	IF ARG == MASTER
	ELSEIF !CHECK_CHARA(ARG, "存在")
	ELSEIF CHECK_CHARA(ARG, "弱み握り")
	ELSEIF CHECK_CHARA(ARG, "陥落") || CHECK_CHARA(ARG, "弱み握られ")
		CALLF MAKE_INT(V_NAME, 1)
	ELSE
	ENDIF
ENDSELECT



@EXIST_キャラリスト33
#LOCALSIZE 1
#LOCALSSIZE 1

@キャラリスト33(ARG, O_DATA, V_NAME)
#FUNCTION
#LOCALSIZE 1
#LOCALSSIZE 1
#DIMS O_DATA
#DIMS V_NAME
SELECTCASE O_DATA
CASE "名前"
	CALLF MAKE_STR(V_NAME, "TARGETリスト")
CASE "判定"
	IF ARG == MASTER
	ELSEIF !CHECK_CHARA(ARG, "存在") || !CHECK_CHARA(ARG, "同室")
	ELSE
		CALLF MAKE_INT(V_NAME, 1)
	ENDIF
ENDSELECT
