;-------------------------------------------------
;関数名:FESTIVAL
;概　要:行事を表す文字列を取得する関数
;引　数:なし
;-------------------------------------------------
@FESTIVAL
#FUNCTIONS
IF DAY:2 == 1
	SELECTCASE DAY:3
		CASE 1
			RETURNF "元旦"
		CASE 3
			RETURNF "女兒節"
		CASE 11
			RETURNF "母親節"
		CASE 14
			RETURNF "白色情人節"
		CASE 25
			RETURNF "例大祭"
	ENDSELECT
ELSEIF DAY:2 == 2
	SELECTCASE DAY:3
		CASE 7
			RETURNF "七夕"
		CASE 14
			RETURNF "盂蘭盆節"
	ENDSELECT
ELSEIF DAY:2 == 3
	SELECTCASE DAY:3
		CASE 1
			RETURNF "風神「二百十日」"
		CASE 15
			RETURNF "中秋節"
		CASE 27
			RETURNF "収穫祭"
		CASE 30
			RETURNF "万聖節"
	ENDSELECT
ELSEIF DAY:2 == 4
	SELECTCASE DAY:3
		CASE 3
			RETURNF "節分祭"
		CASE 14
			RETURNF "情人節"
		CASE 24
			RETURNF "平安夜"
		CASE 25
			RETURNF "聖誕節"
		CASE 31
			RETURNF "大晦日"
	ENDSELECT
ENDIF

;特定の祭日の起床時メッセージ
@SEASONAL_MORNING
SELECTCASE FESTIVAL()
	CASE "元日"
		SIF DAY != 1
			CALL NEWYEAR
	CASE "バレンタインデー"
		PRINTL 会收到巧克力吗…
	CASE "ホワイトデー"
		FOR LOCAL,1,CHARANUM
			SELECTCASE CFLAG:LOCAL:バレンタイン
				CASE 1
					PRINTFORML %CALLNAME:LOCAL%给了黑雷神巧克力……
					PRINTFORMW 刚才那个表现还算合适么
				CASE 2
					PRINTFORML %CALLNAME:LOCAL%给了普通的巧克力……
					PRINTFORMW 要準備相応的回禮
				CASE 3
					PRINTFORML %CALLNAME:LOCAL%给了高级的巧克力……
					PRINTFORMW 要準備上佳的回禮
				CASE 4
					PRINTFORML %CALLNAME:LOCAL%给了亲手做的巧克力……
					PRINTFORMW 要準備充満真心的回禮
			ENDSELECT
		NEXT
ENDSELECT

@SEASONAL(ARG)
VARSET LOCAL
;出会ったとき
SELECTCASE FESTIVAL()
	CASE "元日"
		PRINTL
		PRINTFORML ●%CALLNAME:MASTER%向%CALLNAME:ARG%致以新年问候
		IF TALENT:ARG:幼稚 && DAY > 1
			PRINTFORMW 从%CALLNAME:ARG%那得到了圧岁钱
			SELECTCASE MONEY
				CASE IS > 500000
					LOCAL = 10000
				CASE IS > 100000
					LOCAL = 5000
				CASE IS > 30000
					LOCAL = 3000
				CASE IS > 3000
					LOCAL = 1000
				CASEELSE
					LOCAL = 0
			ENDSELECT
			IF !LOCAL
				PRINTFORML 看到了%CALLNAME:MASTER%钱包的内容、讓%CALLNAME:ARG%投来了憐憫的视线
			ELSE
				PRINTFORML 从%CALLNAME:ARG%那得到了\\{LOCAL}…
				PRINTFORML %CALLNAME:ARG%情绪不错的样子
				MONEY -= LOCAL
				TALENT:ARG:心情 = 1
				CFLAG:ARG:好感度 += LOCAL/200
				CFLAG:ARG:信頼度 += LOCAL/200
			ENDIF
		ENDIF
	CASE "バレンタインデー"
		SELECTCASE CFLAG:ARG:好感度
			CASE 1000 TO 3000
				PRINTFORMW 从%CALLNAME:ARG%那收到了巧克力
				PRINTW ……是黑雷神（义理）巧克力呢
				ITEM:120 ++
				CFLAG:ARG:バレンタイン = 1
			CASE 3001 TO 5000
				PRINTFORMW 从%CALLNAME:ARG%那收到了巧克力
				ITEM:121 ++
				CFLAG:ARG:バレンタイン = 2
			CASE IS > 5000
				IF EXP:ARG:愛情経験 < 100
					PRINTFORMW 从%CALLNAME:ARG%那收到了好像很贵的巧克力
					ITEM:122 ++
					CFLAG:ARG:バレンタイン = 3
				ELSE
					PRINTFORML 从%CALLNAME:ARG%那收到了巧克力
					PRINTW 是亲手作的！好開心！
					ITEM:123 ++
					CFLAG:ARG:バレンタイン = 4
				ENDIF
		ENDSELECT
ENDSELECT

@FESTIVAL_MENU()
#FUNCTIONS
SELECTCASE DAY:2
	;春
	CASE 1
		SELECTCASE DAY:3
			CASE 1,2
				RETURNF "年节菜"
		ENDSELECT
	;夏
	CASE 2
	;秋
	CASE 3
	;冬
	CASE 4
		SELECTCASE DAY:3
			CASE 3
				RETURNF "恵方巻"
			CASE 31
				RETURNF "跨年荞麦面"
		ENDSELECT
ENDSELECT

@NEWYEAR
PRINTL 新年快楽！
PRINTFORML %CALLNAME:MASTER%今年的抱負是…
PRINTL
PRINTLC [1] 自慰奨励
PRINTLC [2] 同性愛推進
PRINTLC [3] 牝穴開拓
PRINTL
PRINTL
PRINTLC [4] 尻穴開発
PRINTLC [5] 乳挟振興
PRINTLC [6] 子孫繁栄
$LOOP
INPUT
SELECTCASE RESULT
	CASE 1
		LOCALS = 自慰
	CASE 2
		LOCALS = 同性愛
	CASE 3
		LOCALS = 性交
	CASE 4
		LOCALS = 肛交
	CASE 5
		LOCALS = 乳交
	CASE 6
		LOCALS = 子作り
	CASEELSE
		GOTO LOOP
ENDSELECT

PRINTFORML %CALLNAME:MASTER%决定今年专注于%LOCALS%、下定了决心
FLAG:抱負 = RESULT

;通年フラグをリセット
FOR LOCAL,0,CHARANUM
	CFLAG:LOCAL:通年 = 0
NEXT