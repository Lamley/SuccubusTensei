@HININSHITE(ARG)

IF ESTRUS_CYCLE(ARG) == 150
	LOCALS = 是危険日
ELSEIF ESTRUS_CYCLE(ARG) != 15
	LOCALS = 不在安全期
ENDIF

IF TALENT:ARG:153
	;PRINTL Feed
	IF CFLAG:ARG:妊娠経過日数 <= 30
		PRINTFORML %CALLNAME:ARG%婉言説道身体还很不安定希望能等到安定期再来并拒絶了挿入。
		TFLAG:16 = 1
	ELSEIF CFLAG:ARG:妊娠経過日数 >= 71
		PRINTFORML %CALLNAME:ARG%婉言説道很快就要临産了希望能等到出産后再来并拒絶了挿入。
		TFLAG:16 = 1
	ENDIF
	RETURN 0
ENDIF
;WAIT

IF CFLAG:ARG:育児人数 >= 1 && CFLAG:ARG:育児人数 <= 3
	PRINTFORML %CALLNAME:ARG%因為感覚真的无法再同时养育更多的孩子了
	PRINTFORML 提出希望能好好地做避妊措施…
ELSE
	PRINTFORML %CALLNAME:ARG%因為今天%LOCALS%而提出希望做避妊措施…
ENDIF	
	CALL KOJO_MESSAGE_SEND("EVENT",18,TARGET,1,0)
WAIT
PRINTFORML [1] 使用避孕套（剩余{ITEM:45}枚）
PRINTFORML [2] 给避孕薬（剩余{ITEM:49}錠）
SIF !TCVAR:懇願 && !CFLAG:ARG:育児人数
PRINTL [3] 請求不戴套做
SIF (TEQUIP:TARGET:縄 || TEQUIP:TARGET:拘束) && !CFLAG:ARG:育児人数
PRINTL [4] 不、絶対要让你怀孕
PRINTL [0] 放弃
$LOOP
INPUT
IF RESULT == 1
	IF !ITEM:45
		PRINTL 没有帯避孕套
		GOTO LOOP
	ELSE
		ITEM:45 -= 1
		PRINTL 戴上了避孕套
		TEQUIP:MASTER:避孕套 = 1
	ENDIF
ELSEIF RESULT == 2
	IF !ITEM:49
		PRINTL 没有帯避孕薬
		GOTO LOOP
	ELSE
		ITEM:49 -= 1
		TCVAR:ARG:口服避孕薬 = 1
		PRINTFORML 给%CALLNAME:ARG%喝了避孕薬 
	ENDIF
ELSEIF RESULT == 3 && !CFLAG:ARG:育児人数
	TCVAR:ARG:懇願 = 1
	CALL OGAMITAOSHI(ARG)
ELSEIF RESULT == 4 && !CFLAG:ARG:育児人数
	TCVAR:ARG:無理矢理 = 1
ELSE
	TFLAG:16 = 3
	TFLAG:17 = ARG
ENDIF
RETURN 0

@避妊要求(ARG)
IF 妊娠可否(ARG) && TALENT:MASTER:2 & 2 && !TFLAG:16 && !TALENT:ARG:無知 && !TCVAR:ARG:無理矢理 && !TCVAR:ARG:泥酔
	IF !CFLAG:ARG:生解禁 && ESTRUS_CYCLE(ARG) != 15
		CALL HININSHITE(ARG)
	ELSEIF CFLAG:ARG:生解禁 < 2 && ESTRUS_CYCLE(ARG) == 150
		CALL HININSHITE(ARG)
	ELSEIF TALENT:ARG:育児中 && CFLAG:ARG:出産経過日 <= 50 && !TFLAG:16 && ESTRUS_CYCLE(TARGET) != 15
		CALL HININSHITE(ARG)
	ENDIF
ENDIF

@妊娠可否(ARG)
#FUNCTION
SIF TEQUIP:PLAYER:避孕套 || TCVAR:ARG:口服避孕薬
	RETURNF 0
SIF TALENT:ARG:幼稚 && !TALENT:ARG:初潮
	RETURNF 0
SIF TALENT:ARG:非生物 || TALENT:ARG:蓬莱人 || TALENT:ARG:妊娠
	RETURNF 0
RETURNF 1