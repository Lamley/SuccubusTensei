@DAIRY_CONDITION_EV0
#DIM 汚れ合計
SIF RAND:8 > 0
	RETURN -1
SIF DAY <= 30
	RETURN -1

汚れ合計 = 0
FOR LOCAL,MINROOM(),MAXROOM
	汚れ合計 += YOGORE:LOCAL
NEXT

SIF 汚れ合計 > (MAXROOM - 100 * MAIN_MAP) * 800
	RETURN -1

CALL DAIRY_EV0
RETURN 1

@DAIRY_EV0
PRINTFORML 在%CALLNAME:MASTER%睡着的时候%GET_MAPNAME(MAIN_MAP)%里大群的妖精蜂拥过来！
IF RAND:10 < ABL:MASTER:戦闘能力 && AT_HOME(MASTER) == 1
	PRINTFORML 妖精们把%GET_MAPNAME(MAIN_MAP)%裏面弄的乱七八糟的
	PRINTFORML 途中発現%CALLNAME:MASTER%出来了、就一溜煙的跑掉了
	PRINTW
	FOR LOCAL,MINROOM(),MAXROOM
		IF RAND:10 <= ABL:MASTER:戦闘能力
			YOGORE:LOCAL = MIN(YOGORE:LOCAL + 1000 + RAND:4000, 6000)
		ENDIF
	NEXT
;黑雷神巧克力を10個以上所持
ELSEIF ITEM:120 >= 10 && AT_HOME(MASTER) == 1
	;最大9つ。主人公の分は残しておく
	ITEM:120 -= RAND:9 + 1
	PRINTFORML %CALLNAME:MASTER%睜開眼睛時妖精們已経在咀嚼黑雷神巧克力了
	PRINTFORML %CALLNAME:MASTER%擦拭妖精的嘴辺、告誡它們可以回家了
ELSE
	PRINTFORML 妖精们把%GET_MAPNAME(MAIN_MAP)%里面弄得乱七八糟的
	PRINTW
	FOR LOCAL,MINROOM(),MAXROOM
		YOGORE:LOCAL = MIN(YOGORE:LOCAL + 1000 + RAND:4000, 6000)
	NEXT
ENDIF