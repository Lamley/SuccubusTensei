2017/07/29
eraTW4.533用フィルター改造パッチm01

コマンドフィルターは無造作にCSVを読んでCOM名を表示しているため
実際には使えないコマンドもずらりと表示されたりするが気にするな

改良版
NGリスト経由で毎回600回るーぷで更新してたんで
必要なNG_IDだけを付け足したり削除したりするように変更
この方が軽いよね


◆説明
・派生コマンドもフィルタリングできるように改造
・フィルター処理のリファクタリング
　一文字変数こそ使っていないがCOUNTを使用するあたり、かなり古風なコードだった
　処理を切り分けてわかりやすく
・フィルター処理が長くなったのでファイルを分けた（OPTION_COM_FILTER.ERB）
・Ｖ系コマンドなどの判定処理をF関数化
・フィルターの一括指定がＶ系/SM系くらいしかできなかったので他もできるように
・クイックフィルターも上記F関数を使用して大幅に簡略化
・クイックフィルター関数とその表示関数をOPTION_COM_FILTER.ERBに移動
・@PRINTBUTTON_EXCの処理が@PRINTBUTTON_EXと異なるのはバグっぽいので直した
　なんかうまく動かないなと思ったら他では使われてなくて気づかれなかったらしい



◆対象環境
eraTW4.533＋[eraT0010119]＋[eraT0010123]
バニラ環境では上手く動きません
Reform_Irai_m01とReform_Irai_m02を導入してから使って下さい



◆つくったひと：morph
・morphのつくった以外のところの扱いはつくったひとに聞いて下さい
・配布・改造・流用、好きにしてください
・でも、その際のサポートは自分でやってね

※　era＝R-18全般の常識的な取り扱いとして例えば以下のような事はやめて下さい

・未成年者がいっぱいいる場所で広める
・R-18以外のモノをメインに扱ってる場所で取り上げる



◆他、おもったこと
・@OPTION_COMMAND_FILTER2(ARG)　
　こいつがどこで使われてんのかよくわからん
　com201ってなんなんだろ？Ｖだけフィルタリングしてるけど

・フラグ覚書
;FLAG:1013
;BIT
; 0　？？？、範囲的にSMフィルタと同一なんで廃止しとく
; 1　Ｖ系コマンド
; 2　Ａ系コマンド
; 3　愛撫系コマンド（フィルターは機能していない）
; 4　道具系コマンド（フィルターは機能していない）
; 5　奉仕系コマンド
; 6　SM系コマンド
; 7　セクハラ系コマンド
; 8　？？？
; 9　家事系コマンド
;10　？？？
;11　？？？
;12　？？？
;13　自慰系コマンド、使ってないっぽい

;FLAG:1026
;USERCOMフィルタ
;BIT
; 0  汚れ表示[801]
; 1  相手を変える[802]
; 2  能力表示[803] 
; 3  能力表示（マスター）[804] 

;ここから↓使わなくなった処理
; 4  Ｖフィルタ[831] 
; 5  Ａフィルタ[832] 
; 6  愛撫フィルタ[833] 
; 7  道具フィルタ[834] 
; 8  奉仕フィルタ[835] 
; 9  ???[836] 
;10  セクハラフィルタ[837] 
;ここまで↑使わなくなった処理

;10  コマンドフィルタ[809]  
;12  履歴表示[800]　
